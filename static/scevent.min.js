!function(){"use strict";var e="snaptr",n="https://tr.snapchat.com",t="__scpt__",i="_sctr",o="cmdone",r=34186698e3,a="_scid",s={age:"u_age",gender:"u_gd",firstname:"u_fn",lastname:"u_ln",device_brand:"d_br",device_model:"d_md",device_type:"d_type",os_type:"d_ot",os_version:"d_os",locale_country:"d_lc",locale_language:"d_ll",user_agent:"d_ua",limited_ad_tracking:"d_lat",connection_type:"c_type",isp:"c_isp",integration:"intg",mobile_carrier:"c_mc",ip_address:"c_ip",lat:"l_lat",long:"l_lng",geo_country:"l_gc",geo_region:"l_gr",geo_metro:"l_gm",geo_city:"l_city",geo_postal_code:"l_gpc",geo_location_source:"l_ls",geo_address:"l_addr",price:"e_pr",item_category:"e_ic",item_ids:"e_iids",currency:"e_cur",number_items:"e_ni",transaction_id:"e_tid",description:"e_desc",level:"e_lv",search_string:"e_ss",payment_info_available:"e_pia",sign_up_method:"e_sm",success:"e_su",event_tag:"et",brand_id:"br_id",data_use:"du",client_dedup_id:"cdid"};function d(e){return!!e&&/^[A-Fa-f0-9]{64}$/.test(e)}function c(e){return e&&36===e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function u(){try{return window.self!==window.top}catch(e){return!0}}var l=!("addEventListener"in document);function f(e,n,t){t&&(l?e.attachEvent(n,t):e.addEventListener(n,t,!1))}function h(){if(u())try{return window.top.location.href}catch(e){try{return window.document.referrer}catch(e){return window.location.href}}return window.location.href}var p=function(){function e(e){return e&&e.performance?e.performance:null}var n=!1,t=null;try{(t=e(window.top))||(t=e(window),n=!0)}catch(i){t=e(window),n=!0}return[t,n]}(),m=p[0],w=p[1],v=!!(m&&m.mark&&m.getEntriesByName&&m.timing&&m.now);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var _,y=function(){return y=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},y.apply(this,arguments)};!function(e){e[e.Loading=0]="Loading",e[e.NotNeeded=1]="NotNeeded",e[e.Ready=2]="Ready"}(_||(_={}));var b=function(){var e=this;this.extractInitInfo=function(n){Object.keys(n).forEach((function(t){var i=n[t];i&&("u_em"===t||"user_email"===t?e.email=i.trim().toLowerCase():"u_hem"===t||"user_hashed_email"===t?e.hashedEmail=i.trim():"u_pn"===t||"user_phone_number"===t?e.phoneNumber=i.trim().replace(/[^\w]/gi,""):"u_hpn"===t||"user_hashed_phone_number"===t?e.hashedPhoneNumber=i.trim():"u_mai"===t||"user_mobile_ad_id"===t?e.mobileAdId=i.trim().toLowerCase():"u_hmai"===t||"user_hashed_mobile_ad_id"===t?e.hashedMobileAdId=i.trim():"u_pnid"===t||"partner_id"===t?e.partnerId=i.trim():"u_puid"===t||"user_partner_uid"===t?e.userPartnerUid=i.trim():t in s&&(e.additionalInfo[s[t]]=i))}))},this.toRequestParams=function(){var n={};return e.hashedEmail&&(n.u_hem=e.hashedEmail),e.hashedEmailDomain&&(n.u_hed=e.hashedEmailDomain),e.hashedPhoneNumber&&(n.u_hpn=e.hashedPhoneNumber),e.hashedMobileAdId&&(n.u_hmai=e.hashedMobileAdId),e.scut&&(n.u_scut=e.scut),e.userPartnerUid&&(n.u_puid=e.userPartnerUid),e.partnerId&&(n.u_pnid=e.partnerId),e.cookie1&&(n.u_c1=e.cookie1),e.srid&&(n.s_r_id=e.srid),y(y({},n),e.additionalInfo)},this.pixelIdList=[],this.hashState=_.NotNeeded,this.cookieSynced=!0,this.cookieSyncInProgress=!1,this.additionalInfo={}};window.snaptrContext||(window.snaptrContext=new b);var S=window.snaptrContext,I=function(){var e=4022871197,n=function(n){n=n.toString();for(var t=0;t<n.length;t++){var i=.02519603282416938*(e+=n.charCodeAt(t));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return n.version="Mash 0.9",n},k=function(){return function(e){var n=0,t=0,i=0,o=1;0===e.length&&(e=[+new Date]);var r=I();n=r(" "),t=r(" "),i=r(" ");for(var a=0;a<e.length;a++)(n-=r(e[a]))<0&&(n+=1),(t-=r(e[a]))<0&&(t+=1),(i-=r(e[a]))<0&&(i+=1);r=null;var s=function(){var e=2091639*n+2.3283064365386963e-10*o;return n=t,t=i,i=e-(o=0|e)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.version="Alea 0.9",s.args=e,s}(Array.prototype.slice.call(arguments))}(""+function e(n,t){var i=[];if(t&&"object"===g(n)&&(3===t||!n.location))for(var o in n)try{i.push(o,e(n[o],t-1))}catch(e){}return i.length?i:""+n}([(new Date).getTime(),navigator.userAgent,navigator.plugins,navigator.language,Math.random()],3));function E(e){var n,t=e?36:32,i="0123456789abcdef".split(""),o=[];e&&(o[8]=o[13]=o[18]=o[23]="-",o[14]="4");for(var r=0;r<t;r++)o[r]||(n=0|16*k.fract53(),o[r]=i[19===r?3&n|8:n]);return o.join("")}function L(){var e=document.createElement("iframe"),n=function(){var e=x();for(;null!=document.getElementById(e);)e=x();return e}();return e.id=n,e.name=n,e}function x(){return"snap"+Math.random().toString().replace(".","")}var T=new(function(){function e(){}return e.prototype.sendForm=function(e,n,t,i,o){var r=L(),a=document.createElement("form");a.method=e,a.action=n,a.target=r.id,a.acceptCharset="utf-8",a.style.cssText="display: none",a.appendChild(r);var s=function(){!function(e,n,t){t&&(l?e.detachEvent(n,t):e.removeEventListener(n,t,!1))}(r,"load",s),Object.keys(t).forEach((function(e){if(t[e]){var n=document.createElement("input");n.name=e,n.value=t[e],a.appendChild(n)}})),f(r,"load",(function(){null!=i&&i(),o||setTimeout((function(){a.parentNode&&a.parentNode.removeChild(a)}),0)})),a.submit()};return f(r,"load",s),document.body.appendChild(a),r},e.prototype.sendJSON=function(e,n,t,i){var o=new XMLHttpRequest;o.open(e,"http://192.168.86.60:8080/r"),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onload=function(){if(o.status>=200&&o.status<300){var e=void 0;try{e=JSON.parse(o.responseText)}catch(e){return void(i&&i(e))}i&&i(void 0,e)}},o.onerror=o.onabort=function(e){i&&i(e)},o.send(JSON.stringify({p:n,b:t}))},e}());function A(){var e=N(a);if(null==e||!c(e)){e=E(1);var n=new Date;n.setTime(n.getTime()+r),O(a,e,n.toUTCString())}S.cookie1=e}function N(e){for(var n=e+"=",t=document.cookie.split(";"),i=t.length-1;i>=0;--i){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}function O(e,n,t,i,o){var r=function(){for(var e="_schn=_"+(Math.random()+1).toString(36).substring(6),n=(document.domain||document.location.hostname).split("."),t="",i=n.length-1;i>=0;i--)if(t="."+n[i]+t,document.cookie=e+";domain="+t+";SameSite=Lax",document.cookie.indexOf(e)>-1)return document.cookie=e.split("=")[0]+"=;domain="+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;SameSite=Lax",t;return null}();document.cookie=e+"="+n+";"+(null==r?"":"domain="+r+";")+(null==t?"":"expires="+t+";")+(null==i?"path=/;":"path="+i+";")+"SameSite=Lax"+(o?"; Secure":"")}function C(){try{A();var e={jsrid:E(1),c1:S.cookie1,siid:S.srid?S.srid:"",pids:S.pixelIdList?S.pixelIdList.join(","):""};T.sendForm("GET","https://tr.snapchat.com/cm/si",e)}catch(e){}}function j(e){var n=[],t=null==e?void 0:e.sync_modes;if(t){for(var i=0;i<t.length;i++){var o={bt:"734640c3",pnid:t[i],cb:(new Date).valueOf()};n.push(T.sendForm("GET","https://tr.snapchat.com/cm/s",o))}P(n)}}function P(e){for(var n=0;n<e.length;n++){var t=document.getElementById(e[n].id);if(null!=t&&"complete"!==t.readyState)return void setTimeout((function(){P(e)}),10)}try{window.parent.postMessage(o,document.referrer)}catch(e){}}function M(){var e=navigator.userAgent.toLowerCase(),n=-1!==e.indexOf("iphone"),t=-1!==e.indexOf("ipad"),i=-1!==e.indexOf("ipod"),o=n||t||i;return-1!==e.indexOf("snapchat")&&o}function D(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("snapchat")&&-1!==e.indexOf("android")}function R(e){var n=window.crypto||window.msCrypto;n&&n.subtle&&window.TextEncoder?function(e){var n=[];if(S.email){n.push(H(S.email).then((function(e){S.hashedEmail=e})));var t="string"==typeof S.email&&S.email.split("@")[1];t&&n.push(H(t).then((function(e){S.hashedEmailDomain=e})))}S.phoneNumber&&n.push(H(S.phoneNumber).then((function(e){S.hashedPhoneNumber=e})));S.mobileAdId&&n.push(H(S.mobileAdId).then((function(e){S.hashedMobileAdId=e})));Promise.all(n).then((function(){U(e)})).catch((function(){q(e)}))}(e):q(e)}function q(e){var n=document.createElement("script");n.async=!0,n.src="https://sc-static.net/js-sha256-v1.min.js","integrity"in n&&"crossOrigin"in n&&(n.integrity="sha384-W4RqaNUbvBdTRc41QQAWDcd2aX9wGruak2WnlXwyjVAlhi56zatCk4e/RSqwrAg6",n.crossOrigin="anonymous");var t=document.getElementsByTagName("script")[0];t&&t.parentNode&&t.parentNode.insertBefore(n,t),"addEventListener"in document?n.addEventListener("load",(function(){return B(e)}),!1):n.attachEvent("load",(function(){return B(e)}))}function B(e){!function(){var e=(new window.scpixel.Hashes.SHA256).hex;if(S.email){S.hashedEmail=e(S.email);var n="string"==typeof S.email&&S.email.split("@")[1];n&&(S.hashedEmailDomain=e(n))}S.phoneNumber&&(S.hashedPhoneNumber=e(S.phoneNumber));S.mobileAdId&&(S.hashedMobileAdId=e(S.mobileAdId))}(),U(e)}function H(e){var n=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",n).then((function(e){return function(e){for(var n=[],t=new DataView(e),i=0;i<t.byteLength;i+=4){var o="00000000",r=(o+t.getUint32(i).toString(16)).slice(-o.length);n.push(r)}return n.join("")}(e)}))}function U(e){var n;S.email&&d(S.email)&&(S.hashedEmail=S.email),!S.email||d(S.email)||(n=S.email,/^[^@]+@[^@]+$/.test(n))||(S.hashedEmail="FFF"+S.hashedEmail),S.mobileAdId&&!c(S.mobileAdId)&&(S.hashedMobileAdId="FFF"+S.hashedMobileAdId),e()}function J(e,t){var a,s,d,u=e[0];if(u&&c(u))if(-1===S.pixelIdList.indexOf(u)&&S.pixelIdList.push(u),S.pixelIdList&&S.pixelIdList.length&&window.fetch&&fetch(n+"/collector/is_enabled?pids="+S.pixelIdList.join()).then((function(e){return e.json()})).then((function(e){e&&Object.keys(e).some((function(n){return!0===e[n]}))&&function(){function e(e){return"password"===e.type||"hidden"===e.type}document.addEventListener("submit",(function(t){if(t.target instanceof HTMLElement){var i=t.target.querySelectorAll("input"),o=[],r=[],a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,s=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(i.forEach((function(n){var t=n.value&&n.value.trim();!e(n)&&t.match(a)&&o.push(t.toLowerCase()),!e(n)&&t.match(s)&&("+"!=t.trim()[0]&&(t="+1"+t),r.push(t.replace(/^0+|\D/g,"")))})),(o.length||r.length)&&window.crypto&&crypto.subtle&&window.TextEncoder){var d=o.map((function(e){return H(e)})),c=Promise.all(d),u=r.map((function(e){return H(e)})),l=Promise.all(u);Promise.all([c,l]).then((function(e){var t=e[0],i=e[1],o=new FormData;o.append("pids",S.pixelIdList.join()),t.length&&o.append("u_hems",t.join()),i.length&&o.append("u_hpns",i.join()),S.cookie1&&o.append("u_c1",S.cookie1),navigator.sendBeacon&&navigator.sendBeacon(n+"/collector/prep_mapping",o)})).catch((function(e){}))}}}))}()})).catch((function(e){})),d=function(e){if(null===e)return null;var n=e.split("|");return n.length<2?null:n[1].split(",")}(N(i)),null===(s=null===d||d.length<1?null:+d[0])||(new Date).valueOf()-s>6048e5)if(S.cookieSyncInProgress)m(0,t);else{S.cookieSynced=!1,S.cookieSyncInProgress=!0;var l=null===(a=e[1])||void 0===a?void 0:a.sync_modes,f={pid:u,sync_modes:Array.isArray(l)?l.join(","):void 0},h=T.sendForm("GET","https://tr.snapchat.com/cm/i",f,void 0,!0),p=function(e){var t,a,s;if((t=n+"/",a=e.origin+"/",null!=t&&null!=a&&t.substr(!s||s<0?0:+s,a.length)===a)&&e.data===o){try{var d=new Date;d.setHours(0,0,0,0);var c=new Date;c.setTime(c.getTime()+r);var u="1|"+d.valueOf();O(i,u,c.toUTCString(),void 0,!1)}catch(e){}S.cookieSynced=!0,S.cookieSyncInProgress=!1;var l=h.parentNode;l&&l.parentNode&&l.parentNode.removeChild(l)}};window.addEventListener?window.addEventListener("message",p):window.attachEvent("message",p),m(0,t)}else z(e,t);function m(n,t){if(S.cookieSynced||n<0)return S.cookieSynced=!0,void z(e,t);setTimeout((function(){m(n-10,t)}),10)}}function F(e,n){var i;!function(){A(),S.scut=G(t,window.location.search.substring(1)),S.scut&&O("snaptr-scut",S.scut);if(!S.scut){var e=document.referrer,n=e.indexOf("?");n>=0&&(S.scut=G(t,e.substring(n+1)),S.scut&&O("snaptr-scut",S.scut))}if(!S.scut){var i=N("snaptr-scut");i&&(S.scut=i)}}(),(null===(i=e[1])||void 0===i?void 0:i.constructor)===Object&&(S.extractInitInfo(e[1]),S.hashState=_.Loading,R((function(){S.hashState=_.Ready,n()})))}function G(e,n){for(var t=n.split("&"),i=0;i<t.length;i++){var o=t[i].split("=");if(o[0]===e)return o[1]}}function z(e,n){F(e,n),(D()||M())&&C(),n()}function Z(n,t,i){if(c(n)){var o={trackId:E(1),pid:n,ev:t,pl:h(),ts:(new Date).valueOf(),rf:document.referrer,v:"1.6.0",if:u(),bt:"734640c3"};if(i){var r=i;Object.keys(r).forEach((function(e){s[e]&&(o[s[e]]=r[e])}))}!function(n){if(!v)return;var t=null==m?void 0:m.timing,i=t?t.domInteractive-t.navigationStart:0,o=t?t.loadEventEnd-t.navigationStart:0,r=function(e){if(!v)return null;var n=null==m?void 0:m.getEntriesByName(e);if(n&&n.length>0)return n[n.length-1];return null}(e);r&&X(n,"m_sl",Math.floor(r.startTime));m&&X(n,"m_rd",Math.floor(m.now()));X(n,"m_pi",i),X(n,"m_pl",o),X(n,"m_ic",+w)}(o);var a=S.toRequestParams(),d=y(y({},o),a);window.snaptr.sendPixelByGTM?window.snaptr.sendPixelByGTM("https://tr.snapchat.com/p"+function(e){var n=e?Object.keys(e).map((function(n){return n+"="+encodeURIComponent(e[n])})).join("&"):"";n&&(n="?"+n);return n}(d),$,$):T.sendJSON("POST","/gateway/p",d)}}function $(){}function X(e,n,t){null==t||t<0||(e[n]=t)}try{v&&(null==m||m.mark(e)),window.triedToSendCookieToNative=!1,function(){var e=window.sessionStorage&&window.sessionStorage.getItem("srid");if(e)S.srid=e;else{window.WebJSBridge={setSRID:function(e){S.srid=e,window.sessionStorage&&window.sessionStorage.setItem("srid",e),C()}};try{D()?window.JSBridge&&window.JSBridge.getSRID&&window.JSBridge.getSRID():M()&&window.webkit&&window.webkit.messageHandlers.getSRID&&window.webkit.messageHandlers.getSRID.postMessage({placeholder:"placeholder"})}catch(e){}}}(),window.snaptr.handleRequest=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window.snaptr.queue.push(e),Q()},window.snaptr.clean=Q,function(e){var n=!1;function t(){n||(n=!0,e())}if("complete"===document.readyState)return void t();if("interactive"===document.readyState)return void setTimeout(t,0);if(document.addEventListener)document.addEventListener("load",t,!1);else if(document.attachEvent){var i=null!=window.frameElement;if(document.documentElement.scroll&&!i){var o=function(){if(!n)try{document.documentElement.scroll({left:0}),t()}catch(e){setTimeout(o,10)}};o()}document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&t()}))}window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t)}(Q)}catch(e){}function W(e){var n=Array.prototype.slice.call(e),t=n.shift();switch(t&&t.toLowerCase&&(t=t.toLowerCase()),t){case"init":J(n,(function(){Q()}));break;case"track":!function(e){if(S.pixelIdList&&S.pixelIdList.length>0&&"string"==typeof e[0])switch(1===e.length&&(e=[e[0],{}]),e.length){case 2:if("string"==typeof e[1]){if(!c(r=e[0]))return;var n=e[1];-1!==S.pixelIdList.indexOf(r)&&Z(r,n)}else for(var t=e[0],i=e[1],o=0;o<S.pixelIdList.length;o++)Z(S.pixelIdList[o],t,i);break;case 3:var r;if(!c(r=e[0]))return;var a=e[1];i=e[2],-1!==S.pixelIdList.indexOf(r)&&Z(r,a,i)}}(n);break;case"autofill":!function(e){!function(e){if(window.snaptr.responseUserInfo=function(n){null==e||e.onComplete(JSON.parse(n))},window.webkit&&window.webkit.messageHandlers.SnapchatUserInfoProvider){var n={request_fields:null==e?void 0:e.fields,js_callback:"snaptr.responseUserInfo"};window.webkit.messageHandlers.SnapchatUserInfoProvider.postMessage(JSON.stringify(n))}else if(null==e?void 0:e.fields){for(var t=0;t<(null==e?void 0:e.fields.length);t++)e.fields[t]=e.fields[t].concat("=");e.fields.push("js_callback=snaptr.responseUserInfo");var i=e.fields.join("&"),o=window.location.protocol+"//"+window.location.host+"/snapchat/userInfoRequest?"+i,r=new XMLHttpRequest;r.open("GET",o,!1),r.send(null)}}(e[0])}(n);break;case"immersive_mode":!function(e){!function(e){if(window.snaptr.responseDidLaunchNativeSharing=function(n){null==e||e.onComplete(n)},window.webkit&&window.webkit.messageHandlers.SnapchatUserInfoProvider)window.webkit.messageHandlers.SnapchatUserInfoProvider.postMessage(JSON.stringify({action:"request_native_sharing",js_callback:"snaptr.responseDidLaunchNativeSharing"}));else{var n=window.location.protocol+"//"+window.location.host+"/snapchat/nativeSharingRequest?action=request_native_sharing&js_callback=snaptr.responseDidLaunchNativeSharing",t=new XMLHttpRequest;t.open("GET",n,!1),t.send(null)}}(e[0])}(n);break;case"cm":!function(e){j(e[0])}(n)}}function Q(){window.triedToSendCookieToNative||(!function(){try{if(D()||M()){A();var e=S.cookie1;e&&D()?window.JSBridge&&window.JSBridge.onCookieId&&window.JSBridge.onCookieId(e):e&&M()&&window.webkit&&window.webkit.messageHandlers.onCookieId&&window.webkit.messageHandlers.onCookieId.postMessage({firstPartyCookie:e})}}catch(e){}}(),window.triedToSendCookieToNative=!0),function e(n){if(window.snaptr.queue&&window.snaptr.queue.length){if(S.cookieSynced&&S.hashState!==_.Loading||n<0)return W(window.snaptr.queue.shift()),void(window.snaptr.queue.length>0&&Q());setTimeout((function(){e(n-10)}),10)}}(1e4)}}();
